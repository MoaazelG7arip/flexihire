import{a as z}from"./chunk-GHKKSTYY.js";import{a as N}from"./chunk-ZKM4LLLM.js";import{a as H}from"./chunk-W3UWONK4.js";import{a as B}from"./chunk-IMCIWAYF.js";import"./chunk-NUY3BYMQ.js";import{d as $,h as D}from"./chunk-KBS3EZNC.js";import{l as j,m as L}from"./chunk-SBNREMTY.js";import{$ as _,Fb as l,Gb as b,Hb as u,Jb as E,Na as k,Ob as w,Tb as x,Ua as i,Ub as I,Wb as h,ba as S,db as d,eb as F,fb as f,jb as c,kb as g,la as y,lb as v,ma as J,mb as C,nb as o,ob as a,pb as p,sb as T,vb as R,wb as s}from"./chunk-IC3SXG5R.js";function V(t,r){if(t&1&&(o(0,"app-notification"),l(1),a()),t&2){let e=s();F("role",e.notification.status),i(),b(e.notification.message)}}function O(t,r){t&1&&p(0,"app-loader")}function P(t,r){t&1&&p(0,"i",14)}function U(t,r){t&1&&p(0,"i",15)}function A(t,r){if(t&1){let e=T();o(0,"div",3)(1,"button",13),R("click",function(){y(e);let m=s().$implicit,M=s(2);return J(M.saveJob(m.id))}),d(2,P,1,0,"i",14)(3,U,1,0,"i",15),a()()}if(t&2){let e=s().$implicit;i(2),c(e.saved?2:3)}}function G(t,r){if(t&1&&(o(0,"span",16),l(1),a()),t&2){let e=s().$implicit;i(),u(" ",e," ")}}function q(t,r){if(t&1&&(o(0,"span",17),l(1),a()),t&2){let e=s(2).$implicit;i(),u(" +",e.skills.length-5," ")}}function K(t,r){if(t&1&&d(0,G,2,1,"span",16)(1,q,2,1,"span",17),t&2){let e=r.$index;c(e<5?0:e==5?1:-1)}}function Q(t,r){if(t&1&&(o(0,"div",2),d(1,A,4,1,"div",3),o(2,"h1",4),l(3),a(),o(4,"div",5)(5,"span",6),l(6),a(),p(7,"img",7),o(8,"span",8),l(9),a()(),p(10,"div",9),o(11,"div")(12,"p",10),l(13),x(14,"currency"),x(15,"currency"),a()(),o(16,"div",11),v(17,K,2,1,null,null,g),o(19,"p",12),l(20),x(21,"date"),a()()()),t&2){let e=r.$implicit,n=s(2);i(),c(n.user.user.roles[0]=="user"?1:-1),i(),f("routerLink","/page/jobs/"+e.id),i(),b(e.title),i(2),f("routerLink","/page/companies/"+e.user.id),i(),u("",e.user.first_name+" "+e.user.last_name,". "),i(3),b(e.location),i(),f("innerHTML",n.getSafeHtml(e.description),k),i(3),E("Salary: ",h(14,11,e.min_salary,"USD","symbol","1.0-0")," - ",h(15,16,e.max_salary,"USD","symbol","1.0-0")," \xA0 ",e.salary_negotiable?" (Negotiable)":" (Not-Negotiable)",""),i(4),C(e.skills),i(3),u("posted on: ",I(21,21,e.date_posted),"")}}function W(t,r){if(t&1&&(o(0,"div",1),v(1,Q,22,23,"div",2,g),a()),t&2){let e=s();i(),C(e.recommendedJobs)}}var se=(()=>{class t{recommendedJobs=[];user;loading=!1;notification={isFound:!1,message:"",status:""};informationService=_(N);jobService=_(z);sanitizer=_($);ngOnInit(){this.fetchRecommendedJobs(),this.user=JSON.parse(localStorage.getItem("user"))}fetchRecommendedJobs(){this.loading=!0,this.informationService.onGetRecommendedJobs().subscribe({next:e=>{this.loading=!1,this.recommendedJobs=e.data,console.log("Recommended Jobs:",this.recommendedJobs)},error:e=>{this.loading=!1,console.error("Error fetching top companies:",e),this.notification={isFound:!0,message:e.error.message||"Error fetching jobs",status:"alert"},setTimeout(()=>{this.notification={isFound:!1,message:"",status:""}},3500)}})}saveJob(e){this.loading=!0,this.jobService.onSaveJob(e).subscribe({next:n=>{console.log(n),this.loading=!1,this.recommendedJobs.forEach(m=>{m.id===e&&(m.saved=!m.saved)}),this.notification={isFound:!0,message:n.message||"Job saved successfully",status:"success"},setTimeout(()=>{this.notification={isFound:!1,message:"",status:""}},3500)},error:n=>{this.loading=!1,console.log(n),this.notification={isFound:!0,message:n.error.message||"Error saving job",status:"alert"},setTimeout(()=>{this.notification={isFound:!1,message:"",status:""}},3500)}})}getSafeHtml(e){return this.sanitizer.bypassSecurityTrustHtml(e)}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=S({type:t,selectors:[["app-recommended-jobs"]],standalone:!0,features:[w],decls:4,vars:2,consts:[[1,"page","bg-gradient-to-b","from-custom-blue","to-white","min-h-screen","overflow-hidden"],[1,"container","max-w-full","text-center","sm:text-start"],[1,"relative","border-custom-blue","bg-white","p-4","py-16","sm:p-8","my-16","w-full","rounded-lg","shadow-lg","space-y-3","sm:space-y-1.5"],[1,"absolute","top-7","right-7"],[1,"text-xl","font-bold","text-black","hover:underline","cursor-pointer",3,"routerLink"],[1,"flex","items-center","gap-2","text-gray-500"],[1,"cursor-pointer",3,"routerLink"],["src","photo/loc.png","alt","",1,"w-5","ms-2"],[1,""],[1,"text-justify","line-clamp-4",3,"innerHTML"],[1,"text-cyan-500","font-bold"],[1,"flex","flex-wrap"],[1,"text-gray-500","absolute","bottom-4","right-4"],[1,"text-black/80","hover:text-cyan-500",3,"click"],[1,"fa-solid","fa-bookmark","text-3xl"],[1,"fa-regular","fa-bookmark","text-3xl"],[1,"self-center","p-1","sm:p-2","m-1","sm:m-2","text-sm","sm:text-base","border","bg-custom-blue/70","rounded-full","hover:bg-dark-blue"],[1,"p-2","m-2","border","bg-custom-blue","rounded-lg","hover:bg-dark-blue"]],template:function(n,m){n&1&&(d(0,V,2,2,"app-notification"),o(1,"div",0),d(2,O,1,0,"app-loader")(3,W,3,0,"div",1),a()),n&2&&(c(m.notification.isFound?0:-1),i(2),c(m.loading?2:3))},dependencies:[D,L,j,H,B]})}return t})();export{se as RecommendedJobsComponent};
