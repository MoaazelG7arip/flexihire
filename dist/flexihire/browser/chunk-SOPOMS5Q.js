import{a as M}from"./chunk-GHKKSTYY.js";import{a as z}from"./chunk-ZKM4LLLM.js";import{a as B}from"./chunk-W3UWONK4.js";import{a as N}from"./chunk-IMCIWAYF.js";import"./chunk-NUY3BYMQ.js";import{d as H,h as $}from"./chunk-KBS3EZNC.js";import{l as L,m as D}from"./chunk-SBNREMTY.js";import{$ as b,Fb as r,Gb as _,Hb as p,Jb as E,Na as j,Ob as I,Tb as v,Ua as i,Ub as w,Wb as h,ba as C,db as d,eb as k,fb as f,jb as c,kb as x,la as y,lb as g,ma as J,mb as S,nb as n,ob as a,pb as m,sb as F,vb as T,wb as l}from"./chunk-IC3SXG5R.js";function O(t,s){if(t&1&&(n(0,"app-notification"),r(1),a()),t&2){let e=l();k("role",e.notification.status),i(),_(e.notification.message)}}function P(t,s){t&1&&m(0,"app-loader")}function U(t,s){if(t&1){let e=F();n(0,"div",3)(1,"button",13),T("click",function(){y(e);let u=l().$implicit,V=l(2);return J(V.saveJob(u.job.id))}),m(2,"i",14),a()()}}function A(t,s){if(t&1&&(n(0,"span",15),r(1),a()),t&2){let e=l().$implicit;i(),p(" ",e," ")}}function G(t,s){if(t&1&&(n(0,"span",16),r(1),a()),t&2){let e=l(2).$implicit;i(),p(" +",e.job.skills.length-5," ")}}function R(t,s){if(t&1&&d(0,A,2,1,"span",15)(1,G,2,1,"span",16),t&2){let e=s.$index;c(e<5?0:e==5?1:-1)}}function q(t,s){if(t&1&&(n(0,"div",2),d(1,U,3,0,"div",3),n(2,"h1",4),r(3),a(),n(4,"div",5)(5,"span",6),r(6),a(),m(7,"img",7),n(8,"span",8),r(9),a()(),m(10,"div",9),n(11,"div")(12,"p",10),r(13),v(14,"currency"),v(15,"currency"),a()(),n(16,"div",11),g(17,R,2,1,null,null,x),n(19,"p",12),r(20),v(21,"date"),a()()()),t&2){let e=s.$implicit,o=l(2);i(),c(o.user.user.roles[0]=="user"?1:-1),i(),f("routerLink","/page/jobs/"+e.job.id),i(),_(e.job.title),i(2),f("routerLink","/page/companies/"+e.job.user.id),i(),p("",e.job.user.first_name+" "+e.job.user.last_name,". "),i(3),_(e.job.location),i(),f("innerHTML",o.getSafeHtml(e.job.description),j),i(3),E("Salary: ",h(14,11,e.job.min_salary,"USD","symbol","1.0-0")," - ",h(15,16,e.job.max_salary,"USD","symbol","1.0-0")," \xA0 ",e.job.salary_negotiable?" (Negotiable)":" (Not-Negotiable)",""),i(4),S(e.job.skills),i(3),p("posted on: ",w(21,21,e.job.date_posted),"")}}function K(t,s){if(t&1&&(n(0,"div",1),g(1,q,22,23,"div",2,x),a()),t&2){let e=l();i(),S(e.savedJobs)}}var ae=(()=>{class t{savedJobs=[];user;loading=!1;notification={isFound:!1,message:"",status:""};informationService=b(z);jobService=b(M);sanitizer=b(H);ngOnInit(){this.fetchSavedJobs(),this.user=JSON.parse(localStorage.getItem("user"))}fetchSavedJobs(){this.loading=!0,this.informationService.onGetSavedJobs().subscribe({next:e=>{this.loading=!1,this.savedJobs=e.data.data,console.log("Saved Jobs:",this.savedJobs)},error:e=>{this.loading=!1,console.error("Error fetching top companies:",e),this.notification={isFound:!0,message:e.error.message||"Error fetching jobs",status:"alert"},setTimeout(()=>{this.notification={isFound:!1,message:"",status:""}},3500)}})}saveJob(e){this.loading=!0,this.jobService.onSaveJob(e).subscribe({next:o=>{console.log(o),this.loading=!1,this.fetchSavedJobs(),this.notification={isFound:!0,message:o.message||"Job saved successfully",status:"success"},setTimeout(()=>{this.notification={isFound:!1,message:"",status:""}},3500)},error:o=>{this.loading=!1,console.log(o),this.notification={isFound:!0,message:o.error.message||"Error saving job",status:"alert"},setTimeout(()=>{this.notification={isFound:!1,message:"",status:""}},3500)}})}getSafeHtml(e){return this.sanitizer.bypassSecurityTrustHtml(e)}static \u0275fac=function(o){return new(o||t)};static \u0275cmp=C({type:t,selectors:[["app-saved-jobs"]],standalone:!0,features:[I],decls:4,vars:2,consts:[[1,"page","bg-gradient-to-b","from-custom-blue","to-white","min-h-screen","overflow-hidden"],[1,"container","max-w-full","text-center","sm:text-start"],[1,"relative","border-custom-blue","bg-white","p-4","py-16","sm:p-8","my-16","w-full","rounded-lg","shadow-lg","space-y-3","sm:space-y-1.5"],[1,"absolute","top-7","right-7"],[1,"text-xl","font-bold","text-black","hover:underline","cursor-pointer",3,"routerLink"],[1,"flex","items-center","gap-2","text-gray-500"],[1,"cursor-pointer",3,"routerLink"],["src","photo/loc.png","alt","",1,"w-5","ms-2"],[1,""],[1,"text-justify","line-clamp-4",3,"innerHTML"],[1,"text-cyan-500","font-bold"],[1,"flex","flex-wrap"],[1,"text-gray-500","absolute","bottom-4","right-4"],[1,"text-black/80","hover:text-cyan-500",3,"click"],[1,"fa-solid","fa-bookmark","text-3xl"],[1,"self-center","p-1","sm:p-2","m-1","sm:m-2","text-sm","sm:text-base","border","bg-custom-blue/70","rounded-full","hover:bg-dark-blue"],[1,"p-2","m-2","border","bg-custom-blue","rounded-lg","hover:bg-dark-blue"]],template:function(o,u){o&1&&(d(0,O,2,2,"app-notification"),n(1,"div",0),d(2,P,1,0,"app-loader")(3,K,3,0,"div",1),a()),o&2&&(c(u.notification.isFound?0:-1),i(2),c(u.loading?2:3))},dependencies:[D,L,$,B,N]})}return t})();export{ae as SavedJobsComponent};
