import{a as U}from"./chunk-GHKKSTYY.js";import{a as A}from"./chunk-W3UWONK4.js";import{a as G}from"./chunk-IMCIWAYF.js";import"./chunk-NUY3BYMQ.js";import{e as N,g as z}from"./chunk-KBS3EZNC.js";import{h as $,i as q,l as H,n as B}from"./chunk-SBNREMTY.js";import{$ as p,Fb as a,Gb as k,Hb as c,Na as F,Oa as I,Ob as D,Pb as P,Rb as V,Tb as T,Ua as r,Vb as E,ba as R,db as f,eb as O,fb as u,jb as x,kb as _,la as v,lb as h,ma as b,mb as C,na as w,nb as i,oa as y,ob as n,pb as d,qb as j,rb as L,sb as S,vb as M,wb as m}from"./chunk-IC3SXG5R.js";var Y=()=>[1,2,3,4,5],J=(t,s)=>({"fa-solid ":t,"fa-regular ":s});function W(t,s){if(t&1&&(i(0,"app-notification"),a(1),n()),t&2){let e=m();O("role",e.notification.status),r(),k(e.notification.message)}}function K(t,s){t&1&&d(0,"app-loader")}function Q(t,s){if(t&1&&d(0,"img",26),t&2){let e=m().$implicit;u("src",e==null||e.company==null?null:e.company.image_url,I)}}function X(t,s){if(t&1&&(i(0,"div",27),a(1),n()),t&2){let e=m().$implicit;r(),k((e==null||e.company==null?null:e.company.first_name[0].toUpperCase())+(e==null||e.company==null?null:e.company.last_name[0].toUpperCase()))}}function Z(t,s){if(t&1&&(j(0),d(1,"i",42),L()),t&2){let e=s.index,o=m().$implicit;r(),u("ngClass",V(1,J,e<(o==null?null:o.rating),e>=(o==null?null:o.rating)))}}function ee(t,s){if(t&1){let e=S();i(0,"tr",7)(1,"td",10),a(2),n(),i(3,"td",10),a(4),T(5,"date"),n(),i(6,"td",11)(7,"div",12)(8,"button",13),d(9,"img",14),a(10," View Review "),n(),i(11,"div",15)(12,"div",16)(13,"div",17)(14,"h3",18),a(15," Review Details "),n(),i(16,"button",19),w(),i(17,"svg",20),d(18,"path",21),n()()(),y(),i(19,"div",22)(20,"div",23)(21,"div",24)(22,"div",25),f(23,Q,1,1,"img",26)(24,X,2,1,"div",27),i(25,"div")(26,"div",28),a(27),n()()(),i(28,"div",29)(29,"div",30),f(30,Z,2,4,"ng-container",31),n(),i(31,"span",32),a(32),T(33,"date"),n()()(),i(34,"div",33)(35,"div",34),d(36,"div"),n(),i(37,"p",35),a(38),n()()()(),i(39,"div",36)(40,"button",37),a(41," Close "),n()()()()(),i(42,"div",12)(43,"div",38)(44,"div",39),d(45,"img",40),n(),i(46,"div",15)(47,"div",16)(48,"div",17)(49,"h3",18),a(50," Delete Review "),n(),i(51,"button",19),w(),i(52,"svg",20),d(53,"path",21),n()()(),y(),i(54,"div",22)(55,"p"),a(56," Are You Sure You Want To Delete this Review? "),n()(),i(57,"div",36)(58,"button",41),M("click",function(){let l=v(e).$implicit,g=m(2);return b(g.onDeleteReview(l.id))}),a(59," Yes Delete It "),n()()()()()()()()}if(t&2){let e=s.$implicit;r(2),c(" ",(e==null?null:e.company.first_name)+" "+(e==null?null:e.company.last_name)," "),r(2),c(" ",E(5,7,e==null?null:e.created_at,"MMMM d, y")," "),r(19),x(!(e==null||e.company==null)&&e.company.image_url?23:24),r(4),c(" ",(e==null||e.company==null?null:e.company.first_name)+" "+(e==null||e.company==null?null:e.company.last_name)," "),r(3),u("ngForOf",P(13,Y)),r(2),c("On ",E(33,10,e==null?null:e.created_at,"MMMM d, y"),""),r(6),c(" ",e==null?null:e.comment," ")}}function te(t,s){if(t&1){let e=S();i(0,"button",43),M("click",function(){let l=v(e).$implicit,g=m(2);return b(g.goToPage(l.label,l.url))}),n()}if(t&2){let e=s.$implicit,o=s.$index,l=m(2);u("disabled",e.active)("innerHTML",o==0?"<<":o==l.paginationLinks.length-1?">>":e.label,F)}}function ie(t,s){if(t&1&&(i(0,"div",0)(1,"div",1)(2,"h1",2),a(3,"My Reviews"),n(),i(4,"div",3)(5,"table",4)(6,"thead",5)(7,"tr")(8,"th",6),a(9,"Company"),n(),i(10,"th",6),a(11,"Review Date"),n(),i(12,"th",6),a(13,"Action"),n()()(),i(14,"tbody"),h(15,ee,60,14,"tr",7,_),n()()()(),i(17,"div",8),h(18,te,1,2,"button",9,_),n()()),t&2){let e=m();r(15),C(e.reviews),r(3),C(e.paginationLinks)}}var ue=(()=>{class t{reviews=null;loading=!1;notification={isFound:!1,message:"",status:""};paginationLinks=[];jobService=p(U);router=p(z);route=p(N);ngOnInit(){this.loading=!0,this.jobService.onGetReviews().subscribe({next:e=>{this.loading=!1,console.log(e),this.reviews=e.data.data,this.paginationLinks=e.data.links,this.notification={isFound:!0,message:e.message||"Reviews fetched successfully",status:"success"},setTimeout(()=>{this.notification={isFound:!1,message:"",status:""}},3500)},error:e=>{this.loading=!1,console.log(e),this.notification={isFound:!0,message:e.error.message||"Error fetching reviews",status:"alert"},setTimeout(()=>{this.notification={isFound:!1,message:"",status:""}},3500)}})}onDeleteReview(e){this.loading=!0,this.jobService.onDeleteReview(e).subscribe({next:o=>{this.loading=!1,console.log(o),this.reviews=this.reviews.filter(l=>l.id!==e),this.notification={isFound:!0,message:o.message||"Review deleted successfully",status:"success"},setTimeout(()=>{this.notification={isFound:!1,message:"",status:""}},3500)},error:o=>{this.loading=!1,console.log(o),this.notification={isFound:!0,message:o.error.message||"Error deleting review",status:"alert"},setTimeout(()=>{this.notification={isFound:!1,message:"",status:""}},3500)}})}goToPage(e,o){if(o!=null){window.scrollTo({top:0,behavior:"smooth"});let l=+this.route.snapshot.queryParamMap.get("page");(l==0||l==null||l==null)&&(l=1),e=="Next &raquo;"?this.router.navigate([],{relativeTo:this.route,queryParams:{page:++l}}):e=="&laquo; Previous"?this.router.navigate([],{relativeTo:this.route,queryParams:{page:--l}}):this.router.navigate([],{relativeTo:this.route,queryParams:{page:e}})}}static \u0275fac=function(o){return new(o||t)};static \u0275cmp=R({type:t,selectors:[["app-my-reviews"]],standalone:!0,features:[D],decls:3,vars:2,consts:[[1,"min-h-screen","max-w-full","py-10","bg-gradient-to-b","from-custom-blue","to-white"],[1,"px-4"],[1,"text-2xl","font-bold","text-gray-800","mb-6"],[1,"overflow-x-auto","bg-white","shadow-md","rounded-lg"],[1,"min-w-full","border-collapse","overflow-x-scroll","whitespace-nowrap"],[1,"bg-custom-blue/40","text-gray-600","font-semibold","uppercase","text-lg"],[1,"px-6","py-3","text-start"],[1,"border-b","hover:bg-gray-50"],[1,"pagination-controls","mx-auto","w-fit","md:border-2","md:border-cyan-500","rounded-full","py-2","px-10","mt-2","mb-20"],[1,"border","text-black","py-1","px-2","m-1","rounded-full","text-sm","md:text-xl","cursor-pointer","hover:bg-gray-100","disabled:bg-cyan-500","disabled:text-white","disabled:cursor-auto",3,"disabled","innerHTML"],[1,"px-6","py-4","text-gray-800"],[1,"px-6","py-4","flex","items-center","gap-4"],["x-data","{modalIsOpen: false}"],["x-on:click","modalIsOpen = true","type","button",1,"flex","border-2","rounded-lg","p-2","px-8","hover:bg-gray-200","cursor-pointer"],["src","photo/eye.png","alt","",1,"w-5","me-1"],["x-cloak","","x-show","modalIsOpen","x-transition.opacity.duration.200ms","","x-trap.inert.noscroll","modalIsOpen","x-on:keydown.esc.window","modalIsOpen = false","x-on:click.self","modalIsOpen = false","role","dialog","aria-modal","true","aria-labelledby","defaultModalTitle",1,"fixed","inset-0","z-30","flex","justify-center","bg-white/20","p-4","pb-8","backdrop-blur-md","items-center","lg:p-8"],["x-show","modalIsOpen","x-transition:enter","transition ease-out duration-200 delay-100 motion-reduce:transition-opacity","x-transition:enter-start","opacity-0 scale-50","x-transition:enter-end","opacity-100 scale-100",1,"flex","max-w-lg","flex-col","gap-4","overflow-hidden","rounded-lg","bg-white","shadow-lg","w-full"],[1,"flex","items-center","justify-between","bg-white","p-4"],["id","defaultModalTitle",1,"font-bold","text-2xl","tracking-wide","text-neutral-900","p-3","m-auto"],["x-on:click","modalIsOpen = false","aria-label","close modal"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24","aria-hidden","true","stroke","currentColor","fill","none","stroke-width","1.4",1,"w-5","h-5"],["stroke-linecap","round","stroke-linejoin","round","d","M6 18L18 6M6 6l12 12"],[1,"p-8","whitespace-normal","text-justify"],[1,"w-full","flex","flex-col","gap-5","md:gap-0","items-center","md:items-start"],[1,"flex","flex-col-reverse","md:flex-row","items-center","justify-between","w-full","gap-5","md:mb-7"],[1,"flex","items-center"],["alt","Eleanor Pena",1,"w-16","h-16","rounded-full","border-2","border-gray-300","object-cover","mr-4",3,"src"],[1,"min-w-16","min-h-16","max-w-16","max-h-16","bg-gray-200","flex","items-center","justify-center","text-4xl","font-semibold","text-gray-600","rounded-full","border-2","border-gray-300","object-cover","mr-4"],[1,"font-semibold","text-lg"],[1,"flex","flex-col","items-end"],[1,"flex","items-center","mb-2"],[4,"ngFor","ngForOf"],[1,"text-gray-500","text-sm"],[1,"flex-1"],[1,"flex","justify-between","items-center","mb-2"],[1,"text-gray-700"],[1,"flex","flex-col-reverse","justify-between","gap-2","bg-white","p-4","sm:flex-row","sm:items-center","md:justify-end"],["x-on:click","modalIsOpen = false","type","button",1,"whitespace-nowrap","rounded-sm","px-4","py-2","text-center","text-sm","font-medium","tracking-wide","text-white","bg-custom-blue","hover:bg-dark-blue","transition","hover:opacity-75","focus-visible:outline-2","focus-visible:outline-offset-2","active:opacity-100","active:outline-offset-0"],[1,""],["x-on:click","modalIsOpen = true","type","button",1,"p-2","border-2","rounded-lg","hover:bg-gray-200","cursor-pointer"],["src","photo/bin.png","alt","",1,"min-w-5","max-w-5"],["x-on:click","modalIsOpen = false","type","button",1,"whitespace-nowrap","rounded-sm","px-4","py-2","text-center","text-sm","font-medium","tracking-wide","text-gray-500","hover:text-gray-900","transition","focus-visible:outline-2","focus-visible:outline-offset-2","focus-visible:outline-black","active:opacity-100","active:outline-offset-0",3,"click"],[1,"fa-star","text-2xl","mr-1",2,"color","#ffd43b",3,"ngClass"],[1,"border","text-black","py-1","px-2","m-1","rounded-full","text-sm","md:text-xl","cursor-pointer","hover:bg-gray-100","disabled:bg-cyan-500","disabled:text-white","disabled:cursor-auto",3,"click","disabled","innerHTML"]],template:function(o,l){o&1&&f(0,W,2,2,"app-notification")(1,K,1,0,"app-loader")(2,ie,20,0,"div",0),o&2&&(x(l.notification.isFound?0:-1),r(),x(l.loading?1:2))},dependencies:[A,G,B,$,q,H]})}return t})();export{ue as MyReviewsComponent};
