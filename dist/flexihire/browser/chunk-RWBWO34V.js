import{a as L}from"./chunk-RUTO4UJI.js";import{c as q,d as u,e as M,f as E,g as N,i as w,k as T,n as X,o as I,t as O,w as z}from"./chunk-VT7537MC.js";import{a as G}from"./chunk-IMCIWAYF.js";import{a as k}from"./chunk-IXTKUC53.js";import{a as R}from"./chunk-NCQ4MMQJ.js";import"./chunk-NUY3BYMQ.js";import{g as y}from"./chunk-KBS3EZNC.js";import{j as F,n as P}from"./chunk-SBNREMTY.js";import{$ as _,Fb as d,Ob as S,Ua as s,ba as b,db as v,fb as m,jb as h,nb as r,ob as i,pb as p,vb as C,wb as x}from"./chunk-IC3SXG5R.js";function V(e,f){e&1&&p(0,"app-loader")}function D(e,f){e&1&&(r(0,"div",18),d(1," Code is required. "),i())}function j(e,f){e&1&&(r(0,"div",18),d(1," Code must be 6 numbers "),i())}function A(e,f){e&1&&(r(0,"div",18),d(1," Password is required. "),i())}function B(e,f){e&1&&(r(0,"div",19),d(1," Password must be at least 8 Characters "),i())}function $(e,f){e&1&&(r(0,"div",18),d(1," Passwords do not match. "),i())}function H(e,f){e&1&&(r(0,"div",18),d(1," Password confirmation is required. "),i())}function J(e,f){if(e&1&&(r(0,"div",7),p(1,"input",8)(2,"label",9),v(3,D,2,0,"div",10)(4,j,2,0,"div",10),i(),r(5,"div",11),p(6,"input",12)(7,"label",13),v(8,A,2,0,"div",10)(9,B,2,0,"div",14),i(),r(10,"div",11),p(11,"input",15)(12,"label",16),v(13,$,2,0,"div",10)(14,H,2,0,"div",10),i(),r(15,"div",7)(16,"button",17),d(17," Request OTP "),i()()),e&2){let t,n,a,l,c,g,o=x();s(3),m("ngIf",((t=o.resetForm.get("token"))==null||t.errors==null?null:t.errors.required)&&((t=o.resetForm.get("token"))==null?null:t.touched)),s(),m("ngIf",((n=o.resetForm.get("token"))==null?null:n.touched)&&((n=o.resetForm.get("token"))==null||n.errors==null?null:n.errors.pattern)),s(4),m("ngIf",((a=o.resetForm.get("password"))==null||a.errors==null?null:a.errors.required)&&((a=o.resetForm.get("password"))==null?null:a.touched)),s(),m("ngIf",!(!((l=o.resetForm.get("password"))==null||l.errors==null)&&l.errors.required)&&((l=o.resetForm.get("password"))==null?null:l.touched)&&((l=o.resetForm.get("password"))==null||l.errors==null?null:l.errors.minlength)),s(4),m("ngIf",o.resetForm.hasError("passwordMismatch")&&((c=o.resetForm.get("password_confirmation"))==null?null:c.touched)&&!(!((c=o.resetForm.get("password_confirmation"))==null||c.errors==null)&&c.errors.required)),s(),m("ngIf",((g=o.resetForm.get("password_confirmation"))==null?null:g.touched)&&((g=o.resetForm.get("password_confirmation"))==null||g.errors==null?null:g.errors.required)),s(2),m("disabled",o.resetForm.invalid)}}var se=(()=>{class e{loading=!1;notification={isFound:!1,message:"",status:""};email=sessionStorage.getItem("email");resetForm;bridgeService=_(R);authService=_(k);router=_(y);ngOnInit(){this.resetForm=new N({email:new w(this.email,[u.required,u.email]),password:new w("",[u.required,u.minLength(8)]),password_confirmation:new w("",[u.required]),token:new w("",[u.required,u.pattern(/^\d{6}$/)])},{validators:L}),this.bridgeService.loading.subscribe(t=>{this.loading=t})}onSubmit(){this.resetForm.valid&&this.onReset()}onReset(){this.loading=!0,this.bridgeService.getLoading(this.loading),this.authService.onResetPassword(this.resetForm.value).subscribe({next:t=>{console.log(t),this.loading=!1,this.bridgeService.getLoading(this.loading),this.notification={isFound:!0,message:t.message,status:"success"},this.bridgeService.getNotification(this.notification),setTimeout(()=>{this.notification={isFound:!1,message:"",status:""}},3500),this.bridgeService.getNotification(this.notification),this.router.navigate(["/auth/login"])},error:t=>{console.error(t),this.loading=!1,this.bridgeService.getLoading(this.loading),this.notification={isFound:!0,message:t?.error?.errors?.email[0]||t?.error?.message,status:"alert"},this.bridgeService.getNotification(this.notification),setTimeout(()=>{this.notification={isFound:!1,message:"",status:""}},3500),this.bridgeService.getNotification(this.notification)}})}static \u0275fac=function(n){return new(n||e)};static \u0275cmp=b({type:e,selectors:[["app-reset-password"]],standalone:!0,features:[S],decls:10,vars:2,consts:[[1,"w-full","flex","h-screen","gap-[5vw]"],[1,"media","overflow-hidden","h-full","absolute","top-0","left-0","w-full","sm:w-[35vw]","sm:relative","-z-10","sm:z-10"],["src","video/vecteezy_happy-child-back-to-school_37210123.mp4","autoplay","","muted","","loop","",1,"w-full","h-full","relative","object-cover"],[1,"meta","overflow-auto","bg-white","bg-opacity-50","sm:bg-none","sm:bg-opacity-0","w-full","sm:w-[60vw]"],[1,"container","pt-16"],[1,"font-bold","text-2xl","mb-6"],[1,"space-y-3","grid","grid-cols-2","gap-x-5",3,"ngSubmit","formGroup"],[1,"col-span-2"],["id","token","type","text","formControlName","token","required",""],["alt","token","placeholder","token"],["class","text-sm text-red-600 mt-1",4,"ngIf"],[1,"col-span-1"],["id","password","type","password","formControlName","password","required",""],["alt","Password","placeholder","Password"],["class","text-sm text-violet-600 mt-1 font-bold",4,"ngIf"],["required","","type","password","formControlName","password_confirmation"],["alt","Confirm","placeholder","Confirm"],["type","submit",1,"w-full","flex","justify-center","py-2","px-4","border","border-transparent","rounded-md","shadow-sm","text-sm","font-medium","text-white","bg-custom-blue","hover:bg-dark-blue","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-custom-blue","disabled:bg-gray-300","disabled:cursor-not-allowed",3,"disabled"],[1,"text-sm","text-red-600","mt-1"],[1,"text-sm","text-violet-600","mt-1","font-bold"]],template:function(n,a){n&1&&(r(0,"div",0)(1,"div",1),p(2,"video",2),i(),r(3,"div",3)(4,"div",4)(5,"h1",5),d(6,"Reset Password"),i(),r(7,"form",6),C("ngSubmit",function(){return a.onSubmit()}),v(8,V,1,0,"app-loader")(9,J,18,7),i()()()()),n&2&&(s(7),m("formGroup",a.resetForm),s(),h(a.loading?8:9))},dependencies:[P,F,z,T,q,M,E,O,X,I,G],styles:["@media (min-width: 640px){.f-page[_ngcontent-%COMP%]{overflow:hidden}.f-page[_ngcontent-%COMP%]   .media[_ngcontent-%COMP%]{animation:move 3s 1 forwards;-webkit-animation:_ngcontent-%COMP%_move 3s 1 forwards;z-index:10}.f-page[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]{animation:move-l 3s 1 forwards;-webkit-animation:_ngcontent-%COMP%_move-l 3s 1 forwards}}@keyframes _ngcontent-%COMP%_move{0%{transform:translate(0);filter:blur(5px);-webkit-filter:blur(5px)}to{transform:translate(65vw);-webkit-transform:translateX(65vw);-moz-transform:translateX(65vw);-ms-transform:translateX(65vw);-o-transform:translateX(65vw);filter:blur(0);-webkit-filter:blur(0)}}@keyframes _ngcontent-%COMP%_move-l{0%{transform:translate(0);-webkit-transform:translateX(0%);-moz-transform:translateX(0%);-ms-transform:translateX(0%);-o-transform:translateX(0%);filter:blur(5px);-webkit-filter:blur(5px)}to{transform:translate(-40vw);-webkit-transform:translateX(-40vw);-moz-transform:translateX(-40vw);-ms-transform:translateX(-40vw);-o-transform:translateX(-40vw);filter:blur(0);-webkit-filter:blur(0)}}"]})}return e})();export{se as ResetPasswordComponent};
