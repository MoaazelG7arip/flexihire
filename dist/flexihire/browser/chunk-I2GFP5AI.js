import{a as O}from"./chunk-GHKKSTYY.js";import{a as z}from"./chunk-ZKM4LLLM.js";import{a as M}from"./chunk-W3UWONK4.js";import{a as N}from"./chunk-IMCIWAYF.js";import"./chunk-NUY3BYMQ.js";import{d as H,e as L,h as $}from"./chunk-KBS3EZNC.js";import{l as D,m as B}from"./chunk-SBNREMTY.js";import{$ as c,Fb as l,Gb as C,Hb as f,Jb as j,Na as J,Ob as w,Tb as b,Ua as o,Ub as E,Wb as h,ba as y,db as m,eb as T,fb as _,jb as p,kb as x,la as S,lb as g,ma as F,mb as v,nb as n,ob as a,pb as u,sb as k,vb as I,wb as r}from"./chunk-IC3SXG5R.js";function A(t,s){if(t&1&&(n(0,"app-notification"),l(1),a()),t&2){let e=r();T("role",e.notification.status),o(),C(e.notification.message)}}function P(t,s){t&1&&u(0,"app-loader")}function R(t,s){if(t&1){let e=k();n(0,"div",3)(1,"button",9),I("click",function(){S(e);let d=r().$implicit,V=r(2);return F(V.saveJob(d.id))}),u(2,"i",10),a()()}}function U(t,s){if(t&1&&(n(0,"span",11),l(1),a()),t&2){let e=r().$implicit;o(),f(" ",e," ")}}function G(t,s){if(t&1&&(n(0,"span",12),l(1),a()),t&2){let e=r(2).$implicit;o(),f(" +",e.skills.length-5," ")}}function q(t,s){if(t&1&&m(0,U,2,1,"span",11)(1,G,2,1,"span",12),t&2){let e=s.$index;p(e<5?0:e==5?1:-1)}}function K(t,s){if(t&1&&(n(0,"div",2),m(1,R,3,0,"div",3),n(2,"h1",4),l(3),a(),u(4,"div",5),n(5,"div")(6,"p",6),l(7),b(8,"currency"),b(9,"currency"),a()(),n(10,"div",7),g(11,q,2,1,null,null,x),n(13,"p",8),l(14),b(15,"date"),a()()()),t&2){let e=s.$implicit,i=r(2);o(),p(i.user.user.roles[0]=="user"?1:-1),o(),_("routerLink","/page/jobs/"+e.id),o(),C(e.title),o(),_("innerHTML",i.getSafeHtml(e.description),J),o(3),j("Salary: ",h(8,8,e.min_salary,"USD","symbol","1.0-0")," - ",h(9,13,e.max_salary,"USD","symbol","1.0-0")," \xA0 ",e.salary_negotiable?" (Negotiable)":" (Not-Negotiable)",""),o(4),v(e.skills),o(3),f("posted on: ",E(15,18,e.date_posted),"")}}function Q(t,s){if(t&1&&(n(0,"div",1),g(1,K,16,20,"div",2,x),a()),t&2){let e=r();o(),v(e.myJobs)}}var se=(()=>{class t{myJobs=[];user;loading=!1;notification={isFound:!1,message:"",status:""};routeSubscription;informationService=c(z);jobService=c(O);sanitizer=c(H);route=c(L);ngOnInit(){this.routeSubscription=this.route.paramMap.subscribe(e=>{let i=+e.get("id");this.fetchCompanyDetails(i)}),this.user=JSON.parse(localStorage.getItem("user"))}fetchCompanyDetails(e){this.loading=!0,this.informationService.onGetCompanyById(e).subscribe({next:i=>{this.loading=!1,console.log(i),this.myJobs=i.company.jobs,this.notification={isFound:!0,message:i.message||"Companies fetched successfully",status:"success"},setTimeout(()=>{this.notification={isFound:!1,message:"",status:""}},3500)},error:i=>{this.loading=!1,console.log(i),this.notification={isFound:!0,message:i.error.message||"Companies not fetched ",status:"alert"},setTimeout(()=>{this.notification={isFound:!1,message:"",status:""}},3500)}})}ngOnDestroy(){this.routeSubscription&&this.routeSubscription.unsubscribe()}saveJob(e){this.loading=!0,this.jobService.onSaveJob(e).subscribe({next:i=>{console.log(i),this.loading=!1,this.notification={isFound:!0,message:i.message||"Job saved successfully",status:"success"},setTimeout(()=>{this.notification={isFound:!1,message:"",status:""}},3500)},error:i=>{this.loading=!1,console.log(i),this.notification={isFound:!0,message:i.error.message||"Error saving job",status:"alert"},setTimeout(()=>{this.notification={isFound:!1,message:"",status:""}},3500)}})}getSafeHtml(e){return this.sanitizer.bypassSecurityTrustHtml(e)}static \u0275fac=function(i){return new(i||t)};static \u0275cmp=y({type:t,selectors:[["app-jobs"]],standalone:!0,features:[w],decls:4,vars:2,consts:[[1,"page","bg-gradient-to-b","from-custom-blue","to-white","min-h-screen","overflow-hidden"],[1,"container","max-w-full","text-center","sm:text-start"],[1,"relative","border-custom-blue","bg-white","p-4","py-16","sm:p-8","my-16","w-full","rounded-lg","shadow-lg","space-y-3","sm:space-y-1.5"],[1,"absolute","top-7","right-7"],[1,"text-xl","font-bold","text-black","hover:underline","cursor-pointer",3,"routerLink"],[1,"text-justify","line-clamp-4",3,"innerHTML"],[1,"text-cyan-500","font-bold"],[1,"flex","flex-wrap"],[1,"text-gray-500","absolute","bottom-4","right-4"],[1,"text-black/80","hover:text-cyan-500",3,"click"],[1,"fa-solid","fa-bookmark","text-3xl"],[1,"self-center","p-1","sm:p-2","m-1","sm:m-2","text-sm","sm:text-base","border","bg-custom-blue/70","rounded-full","hover:bg-dark-blue"],[1,"p-2","m-2","border","bg-custom-blue","rounded-lg","hover:bg-dark-blue"]],template:function(i,d){i&1&&(m(0,A,2,2,"app-notification"),n(1,"div",0),m(2,P,1,0,"app-loader")(3,Q,3,0,"div",1),a()),i&2&&(p(d.notification.isFound?0:-1),o(2),p(d.loading?2:3))},dependencies:[M,N,$,B,D]})}return t})();export{se as JobsComponent};
