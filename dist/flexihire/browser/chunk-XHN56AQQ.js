import{a as W}from"./chunk-7XDUVRNF.js";import{a as Q}from"./chunk-GHKKSTYY.js";import{a as K}from"./chunk-ZKM4LLLM.js";import{a as O}from"./chunk-W3UWONK4.js";import{a as G}from"./chunk-IMCIWAYF.js";import"./chunk-NUY3BYMQ.js";import{d as z,e as A,g as R,h as U}from"./chunk-KBS3EZNC.js";import{h as $,l as H,m as q,n as D}from"./chunk-SBNREMTY.js";import{$ as C,Eb as a,Fb as _,Gb as F,Hb as v,Jb as I,Na as L,Ob as N,Rb as B,Tb as J,Ua as d,Ub as M,Wb as E,ba as V,db as y,eb as P,fb as S,jb as h,kb as k,la as x,lb as w,ma as f,mb as T,nb as l,ob as c,pb as g,sb as j,vb as b,wb as m}from"./chunk-IC3SXG5R.js";var X=(i,u)=>({block:i,hidden:u});function Y(i,u){if(i&1&&(l(0,"app-notification"),_(1),c()),i&2){let e=m();P("role",e.notification.status),d(),F(e.notification.message)}}function Z(i,u){i&1&&g(0,"app-loader")}function ee(i,u){i&1&&g(0,"i",38)}function te(i,u){i&1&&g(0,"i",39)}function ie(i,u){if(i&1){let e=j();l(0,"div",26)(1,"button",37),b("click",function(){x(e);let t=m().$implicit,o=m(2);return f(o.saveJob(t.id))}),y(2,ee,1,0,"i",38)(3,te,1,0,"i",39),c()()}if(i&2){let e=m().$implicit;d(2),h(e.saved?2:3)}}function ne(i,u){if(i&1&&(l(0,"span",40),_(1),c()),i&2){let e=m().$implicit;d(),v(" ",e," ")}}function oe(i,u){if(i&1&&(l(0,"span",41),_(1),c()),i&2){let e=m(2).$implicit;d(),v(" +",e.skills.length-5," ")}}function re(i,u){if(i&1&&y(0,ne,2,1,"span",40)(1,oe,2,1,"span",41),i&2){let e=u.$index;h(e<5?0:e==5?1:-1)}}function ae(i,u){if(i&1&&(l(0,"div",23),y(1,ie,4,1,"div",26),l(2,"h1",27),_(3),c(),l(4,"div",28)(5,"span",29),g(6,"i",30),_(7),c(),l(8,"span",31),g(9,"img",32),_(10),c()(),g(11,"div",33),l(12,"div")(13,"p",34),_(14),J(15,"currency"),J(16,"currency"),c()(),l(17,"div",35),w(18,re,2,1,null,null,k),l(20,"p",36),_(21),J(22,"date"),c()()()),i&2){let e=u.$implicit,n=m(2);d(),h(n.user.user.roles[0]=="user"?1:-1),d(),S("routerLink","/page/jobs/"+e.id),d(),F(e.title),d(2),S("routerLink","/page/companies/"+e.user.id),d(2),v(" ",e.user.first_name+" "+e.user.last_name,". "),d(3),v(" ",e.location,""),d(),S("innerHTML",n.getSafeHtml(e.description),L),d(3),I("Salary: ",E(15,11,e.min_salary,"USD","symbol","1.0-0")," - ",E(16,16,e.max_salary,"USD","symbol","1.0-0")," \xA0 ",e.salary_negotiable?" (Negotiable)":" (Not-Negotiable)",""),d(4),T(e.skills),d(3),v("posted on: ",M(22,21,e.date_posted),"")}}function le(i,u){i&1&&(l(0,"div",24),g(1,"i",42),l(2,"h2",43),_(3,"No Jobs Found"),c()())}function se(i,u){if(i&1){let e=j();l(0,"button",45),b("click",function(){let t=x(e).$implicit,o=m(3);return f(o.goToPage(t.label,t.url))}),c()}if(i&2){let e=u.$implicit,n=u.$index,t=m(3);S("disabled",e.active)("innerHTML",n==0?"<<":n==t.paginationLinks.length-1?">>":e.label,L)}}function ce(i,u){if(i&1&&(l(0,"div",25),w(1,se,1,2,"button",44,k),c()),i&2){let e=m(2);d(),T(e.paginationLinks)}}function me(i,u){if(i&1){let e=j();l(0,"div",6)(1,"div",7)(2,"div",8)(3,"input",9,0),b("keyup.enter",function(){x(e);let t=a(4),o=a(19),s=a(22),r=a(25),p=m();return f(p.onSearch(t,o,s,r))}),c(),l(5,"button",10),b("click",function(){x(e);let t=a(4),o=a(19),s=a(22),r=a(25),p=m();return f(p.onSearch(t,o,s,r))}),_(6,"Find job"),c()(),l(7,"i",11),b("click",function(){x(e);let t=m();return f(t.filter=!t.filter)}),c()(),l(8,"div",12)(9,"div",13),b("click",function(){x(e);let t=m();return f(t.filter=!1)}),g(10,"i",14),c(),l(11,"h2",15),_(12,"Filters"),c(),l(13,"div",16)(14,"div",17)(15,"input",9,1),b("keyup.enter",function(){x(e);let t=a(16),o=a(19),s=a(22),r=a(25),p=m();return f(p.onSearch(t,o,s,r))}),c()(),l(17,"div",17)(18,"input",18,2),b("keyup.enter",function(){x(e);let t=a(16),o=a(19),s=a(22),r=a(25),p=m();return f(p.onSearch(t,o,s,r))}),c()(),l(20,"div",17)(21,"input",19,3),b("keyup.enter",function(){x(e);let t=a(16),o=a(19),s=a(22),r=a(25),p=m();return f(p.onSearch(t,o,s,r))}),c()(),l(23,"div",17)(24,"input",20,4),b("keyup.enter",function(){x(e);let t=a(16),o=a(19),s=a(22),r=a(25),p=m();return f(p.onSearch(t,o,s,r))}),c()()(),l(26,"div",21)(27,"button",22),b("click",function(){x(e);let t=a(16),o=a(19),s=a(22),r=a(25),p=m();return f(p.onSearch(t,o,s,r))}),_(28,"Apply Filters"),c()()(),w(29,ae,23,23,"div",23,k),y(31,le,4,0,"div",24)(32,ce,3,0,"div",25),c()}if(i&2){let e=m();d(8),S("ngClass",B(2,X,e.filter,!e.filter)),d(21),T(e.jobs),d(2),h(e.jobs.length==0?31:32)}}var ve=(()=>{class i{informationService=C(K);jobService=C(Q);jobs=[];loading=!1;locationChange=!1;userLocation;list;user;filter=!1;routeSubscription;notification={isFound:!1,message:"",status:""};route=C(A);router=C(R);sanitizer=C(z);paginationLinks=[];allSkills=[];selectedSkills=[];ngOnInit(){sessionStorage.removeItem("addInfo"),this.user=JSON.parse(localStorage.getItem("user")),this.routeSubscription=this.route.queryParamMap.subscribe(e=>{let n=+e.get("page"),t=e.get("search"),o=e.get("searchLocation"),s=e.get("minSalary"),r=e.get("maxSalary");n==0&&(n=1),t==null&&(t=""),o==null&&(o=""),s==null&&(s=""),r==null&&(r=""),this.fetchJobsDetails(n,t,o,s,r)})}fetchJobsDetails(e,n,t,o,s){this.loading=!0,this.informationService.onGetJobsByUrl(e,n,t,o,s).subscribe({next:r=>{console.log(r),this.loading=!1,this.jobs=r.data.data,this.paginationLinks=r.data.links,this.notification={isFound:!0,message:r.message||"Jobs fetched successfully",status:"success"},setTimeout(()=>{this.notification={isFound:!1,message:"",status:""}},3500)},error:r=>{this.loading=!1,console.log(r),this.notification={isFound:!0,message:r.error.message||"Error fetching jobs",status:"alert"},setTimeout(()=>{this.notification={isFound:!1,message:"",status:""}},3500)}})}goToPage(e,n){if(n!=null){window.scrollTo({top:0,behavior:"smooth"});let t=+this.route.snapshot.queryParamMap.get("page"),o=this.route.snapshot.queryParamMap.get("search"),s=this.route.snapshot.queryParamMap.get("searchLocation"),r=this.route.snapshot.queryParamMap.get("minSalary"),p=this.route.snapshot.queryParamMap.get("maxSalary");t==0&&(t=1),o==null&&(o=""),s==null&&(s=""),r==null&&(r=""),p==null&&(p=""),e=="Next &raquo;"?this.router.navigate(["/page/jobs"],{queryParams:{page:++t,search:o,searchLocation:s,minSalary:r,maxSalary:p}}):e=="&laquo; Previous"?this.router.navigate(["/page/jobs"],{queryParams:{page:--t,search:o,searchLocation:s,minSalary:r,maxSalary:p}}):this.router.navigate(["/page/jobs"],{queryParams:{page:e,search:o,searchLocation:s,minSalary:r,maxSalary:p}})}}onSearch(e,n,t,o){this.filter=!1,this.router.navigate(["/page/jobs"],{queryParams:{page:1,search:e.value,searchLocation:n.value,minSalary:t.value,maxSalary:o.value}})}getSafeHtml(e){return this.sanitizer.bypassSecurityTrustHtml(e)}saveJob(e){this.loading=!0,this.jobService.onSaveJob(e).subscribe({next:n=>{console.log(n),this.loading=!1,this.jobs.forEach(t=>{t.id===e&&(t.saved=!t.saved)}),this.notification={isFound:!0,message:n.message||"Job saved successfully",status:"success"},setTimeout(()=>{this.notification={isFound:!1,message:"",status:""}},3500)},error:n=>{this.loading=!1,console.log(n),this.notification={isFound:!0,message:n.error.message||"Error saving job",status:"alert"},setTimeout(()=>{this.notification={isFound:!1,message:"",status:""}},3500)}})}static \u0275fac=function(n){return new(n||i)};static \u0275cmp=V({type:i,selectors:[["app-jobs"]],standalone:!0,features:[N],decls:5,vars:2,consts:[["job",""],["jobName",""],["jobLocation",""],["minSalary",""],["maxSalary",""],[1,"page","bg-gradient-to-b","from-custom-blue","to-white","min-h-screen","overflow-hidden"],[1,"container","max-w-full","text-center","sm:text-start","relative"],[1,"w-full","bg-white","rounded-lg","shadow-lg","my-16","flex","items-center"],[1,"w-full","p-2","sm:p-5","relative"],["type","text","placeholder","Search By Job Title...",1,"!border-cyan-500","!rounded-3xl","!m-0",3,"keyup.enter"],[1,"absolute","top-1/2","-translate-y-1/2","right-4","sm:right-6","text-sm","sm:text-xl","text-white","cursor-pointer","bg-custom-blue","hover:bg-dark-blue","px-4","sm:px-6","py-2","rounded-full",3,"click"],[1,"fa-solid","fa-bars","relative","text-sm","sm:text-xl","text-white","cursor-pointer","bg-custom-blue","hover:bg-dark-blue","px-4","sm:px-6","me-2","py-2","rounded-2xl",3,"click"],[1,"absolute","z-[5]","bg-white","rounded-lg","shadow-2xl","w-[80vw]","p-5","md:p-10","left-1/2","-translate-x-1/2","top-[5rem]","border-2","border-dark-blue",3,"ngClass"],[1,"float-end","cursor-pointer",3,"click"],[1,"fa-solid","fa-square-xmark","text-2xl","text-red-700","hover:text-red-900"],[1,"text-center","font-bold","text-custom-blue","text-3xl"],[1,"grid","grid-cols-1","md:grid-cols-2","items-center","justify-between","md:p-5"],[1,"w-full","p-2","md:p-5","relative"],["type","text","placeholder","Search By Job Location..",1,"!border-cyan-500","!rounded-3xl","!m-0",3,"keyup.enter"],["type","text","placeholder","Search By MinSalary...",1,"!border-cyan-500","!rounded-3xl","!m-0",3,"keyup.enter"],["type","text","placeholder","Search By MaxSalary...",1,"!border-cyan-500","!rounded-3xl","!m-0",3,"keyup.enter"],[1,"flex","justify-center"],[1,"py-2","px-8","bg-custom-blue","hover:bg-dark-blue","text-white","rounded-xl",3,"click"],[1,"relative","border-custom-blue","bg-white","p-4","py-16","sm:p-8","my-16","w-full","rounded-lg","shadow-lg","space-y-3","sm:space-y-1.5"],[1,"flex","flex-col","items-center","justify-center","w-full","h-52"],[1,"pagination-controls","mx-auto","w-fit","md:border-2","md:border-cyan-500","rounded-full","py-2","px-10","mt-2","mb-20"],[1,"absolute","top-7","right-7"],[1,"text-xl","font-bold","text-black","hover:underline","cursor-pointer",3,"routerLink"],[1,"flex","flex-col","sm:flex-row","items-center","gap-2","text-gray-500"],[1,"cursor-pointer",3,"routerLink"],[1,"fa-regular","fa-building","me-2"],[1,"flex"],["src","photo/loc.png","alt","",1,"w-5","me-2"],[1,"text-justify","line-clamp-3","my-3",3,"innerHTML"],[1,"text-cyan-500","font-bold"],[1,"flex","flex-wrap"],[1,"text-gray-500","absolute","bottom-4","right-4"],[1,"text-black/80","hover:text-cyan-500",3,"click"],[1,"fa-solid","fa-bookmark","text-3xl"],[1,"fa-regular","fa-bookmark","text-3xl"],[1,"self-center","p-1","sm:p-2","m-1","sm:m-2","text-sm","sm:text-base","border","bg-custom-blue/70","rounded-full","hover:bg-dark-blue"],[1,"p-2","m-2","border","bg-custom-blue","rounded-lg","hover:bg-dark-blue"],[1,"fa-solid","fa-circle-exclamation","text-9xl","text-yellow-500"],[1,"text-4xl","font-semibold","text-gray-700","text-center"],[1,"border","text-black","py-1","px-2","m-1","rounded-full","text-sm","md:text-xl","cursor-pointer","hover:bg-gray-100","disabled:bg-cyan-500","disabled:text-white","disabled:cursor-auto",3,"disabled","innerHTML"],[1,"border","text-black","py-1","px-2","m-1","rounded-full","text-sm","md:text-xl","cursor-pointer","hover:bg-gray-100","disabled:bg-cyan-500","disabled:text-white","disabled:cursor-auto",3,"click","disabled","innerHTML"]],template:function(n,t){n&1&&(y(0,Y,2,2,"app-notification"),g(1,"app-progress-bar"),l(2,"div",5),y(3,Z,1,0,"app-loader")(4,me,33,5,"div",6),c()),n&2&&(h(t.notification.isFound?0:-1),d(3),h(t.loading?3:4))},dependencies:[W,G,U,q,H,O,D,$]})}return i})();export{ve as JobsComponent};
